@using FDHiring.Web.Helpers
@{
    var candidateId = Context.Session.GetCandidateId();
    var hasCandidateId = candidateId > 0;
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FD Hiring - @ViewData["Title"]</title>
    <link rel="icon" href="data:," />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/css/bundle.css" />
</head>
<body>
    @await Html.PartialAsync("_IconSprite")

    <div class="app-container">

        <!-- HEADER -->
        <header>
            <div class="header-left">
                <div class="app-logo">FD Hiring</div>
                <div class="page-title">@ViewData["Title"]</div>
                <div class="page-action-message" data-page-action></div>
            </div>
            <div class="header-center">
                @if (IsSectionDefined("HeaderCenter"))
                {
                    @RenderSection("HeaderCenter", required: false)
                }
                else
                {
                    @await Html.PartialAsync("_CandidateHeader")
                }
            </div>
            <div class="header-right">
                @RenderSection("HeaderRight", required: false)
            </div>
        </header>

        <!-- MAIN -->
        <main>
            <!-- SIDEBAR -->
            <aside>
                <div class="side-action-buttons">
                    <a href="@Url.Action("Add", "Candidate")" class="btn action @(currentAction == "Add" ? "active" : "")" title="Add Candidate">
                        <svg><use href="#icon-add"></use></svg>
                    </a>
                    <a href="@Url.Action("Search", "Candidate")" class="btn action @(currentAction == "Search" ? "active" : "")" title="Search">
                        <svg><use href="#icon-search"></use></svg>
                    </a>
                    <a href="@Url.Action("Index", "Dashboard")" class="btn action @(currentController == "Dashboard" ? "active" : "")" title="Dashboard">
                        <svg><use href="#icon-dashboard"></use></svg>
                    </a>
                    @if (hasCandidateId)
                    {
                        <a href="@Url.Action("Edit", "Candidate", new { id = candidateId })" class="btn action @(currentAction == "Edit" ? "active" : "")" title="Edit Candidate">
                            <svg><use href="#icon-edit"></use></svg>
                        </a>
                        <a href="@Url.Action("Workflow", "Candidate", new { id = candidateId })" class="btn action @(currentAction == "Workflow" ? "active" : "")" title="Workflow">
                            <svg><use href="#icon-workflow"></use></svg>
                        </a>
                        <a href="@Url.Action("Interview", "Candidate", new { id = candidateId })" class="btn action @(currentAction == "Interview" ? "active" : "")" title="Interviews">
                            <svg><use href="#icon-interview"></use></svg>
                        </a>
                        <a href="@Url.Action("Files", "Candidate", new { id = candidateId })" class="btn action @(currentAction == "Files" ? "active" : "")" title="Files">
                            <svg><use href="#icon-files"></use></svg>
                        </a>
                        <a href="@Url.Action("Communicate", "Candidate", new { id = candidateId })" class="btn action @(currentAction == "Communicate" ? "active" : "")" title="Communicate">
                            <svg><use href="#icon-communicate"></use></svg>
                        </a>
                    }
                    else
                    {
                        <span class="btn action disabled" title="Edit Candidate">
                            <svg><use href="#icon-edit"></use></svg>
                        </span>
                        <span class="btn action disabled" title="Workflow">
                            <svg><use href="#icon-workflow"></use></svg>
                        </span>
                        <span class="btn action disabled" title="Interviews">
                            <svg><use href="#icon-interview"></use></svg>
                        </span>
                        <span class="btn action disabled" title="Files">
                            <svg><use href="#icon-files"></use></svg>
                        </span>
                        <span class="btn action disabled" title="Communicate">
                            <svg><use href="#icon-communicate"></use></svg>
                        </span>
                    }
                </div>
                <div class="side-setting-buttions">
                    <a href="@Url.Action("Index", "Settings")" class="btn @(currentController == "Settings" ? "active" : "")" title="Settings">
                        <svg><use href="#icon-settings"></use></svg>
                    </a>
                </div>
            </aside>

            <!-- CONTENT -->
            <div class="content-area">
                @RenderSection("Toolbar", required: false)
                <div class="content-body">
                    @RenderBody()
                </div>
            </div>
        </main>

    </div>

    <!-- Confirm Modal -->
    <div class="modal-overlay hidden" data-confirm-modal>
        <div class="modal">
            <div class="modal-header">
                <h2 data-confirm-modal-title>Are you sure?</h2>
            </div>
            <div class="modal-body">
                <p data-confirm-modal-message></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary m-right-sm" data-confirm-modal-cancel>Cancel</button>
                <button class="btn btn-danger" data-confirm-modal-confirm>Delete</button>
            </div>
        </div>
    </div>

    <script src="/js/toast.js"></script>
    <script src="/js/confirm.js"></script>
    <script src="/js/candidate-header.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>