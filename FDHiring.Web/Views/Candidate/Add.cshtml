@using FDHiring.Core.Models
@{
    ViewData["Title"] = "Add Candidate";
    var positions = ViewData["Positions"] as IEnumerable<Position> ?? Enumerable.Empty<Position>();
    var agencies = ViewData["Agencies"] as IEnumerable<Agency> ?? Enumerable.Empty<Agency>();
    var today = DateTime.Today.ToString("yyyy-MM-dd");
}

@section Scripts {
    <script type="module" src="~/js/candidate-add.js"></script>
}

<!-- Back nav -->
<a href="/Candidate/Search" class="btn btn-ghost mb-lg">
    <svg class="icon icon-sm"><use href="#icon-arrow-left"></use></svg>
    Back to Candidates
</a>

<!-- Add Form -->
<div class="form-panel" style="max-width:700px">
    <div class="form-panel-title">Add Candidate</div>

    <form method="post" asp-action="Add" data-add-form novalidate>

        <div class="form-row">
            <div class="form-group">
                <label class="form-label" for="firstName">
                    First Name <span class="required">*</span>
                </label>
                <input class="input" id="firstName" name="firstName" type="text"
                       data-required="First Name" />
            </div>
            <div class="form-group">
                <label class="form-label" for="lastName">
                    Last Name <span class="required">*</span>
                </label>
                <input class="input" id="lastName" name="lastName" type="text"
                       data-required="Last Name" />
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label class="form-label" for="email">
                    Email <span class="required">*</span>
                </label>
                <input class="input" id="email" name="email" type="text"
                       data-required="Email" data-email />
            </div>
            <div class="form-group">
                <label class="form-label" for="linkedIn">LinkedIn</label>
                <input class="input" id="linkedIn" name="linkedIn" type="text" />
            </div>
        </div>

        <div class="form-group" style="max-width:calc(50% - var(--space-sm))">
            <label class="form-label" for="phone">Phone</label>
            <input class="input" id="phone" name="phone" type="tel" />
        </div>

        <div class="form-row">
            <div class="form-group">
                <label class="form-label" for="positionId">
                    Position <span class="required">*</span>
                </label>
                <select class="select" id="positionId" name="positionId" data-required="Position">
                    @foreach (var p in positions)
                    {
                        if (p.Name == "Full Stack Developer")
                        {
                            <option value="@p.Id" selected>@p.Name</option>
                        }
                        else
                        {
                            <option value="@p.Id">@p.Name</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group">
                <label class="form-label" for="agencyId">
                    Agency <span class="required">*</span>
                </label>
                <select class="select" id="agencyId" name="agencyId" data-required="Agency">
                    @foreach (var a in agencies)
                    {
                        <option value="@a.Id">@a.Name</option>
                    }
                </select>
            </div>
        </div>

        <div class="form-group" style="max-width:calc(50% - var(--space-sm))">
            <label class="form-label" for="dateFound">Date Found</label>
            <input class="input" id="dateFound" name="dateFound" type="date"
                   value="@today" />
        </div>

        <div class="form-group">
            <label class="form-label" for="notes">Notes</label>
            <textarea class="textarea m-height-5" id="notes" name="notes" placeholder="Internal notes about this candidate..."></textarea>
        </div>

        <div class="form-group">
            <label class="form-label">Status</label>
            <div style="display:flex;flex-direction:column;gap:var(--space-sm)">
                <label class="toggle-label">
                    <input class="toggle-input" type="checkbox" name="active"
                           value="true" checked />
                    Active
                </label>
                <label class="toggle-label">
                    <input class="toggle-input" type="checkbox" name="wouldHire"
                           value="true" />
                    Would Hire
                </label>
                <label class="toggle-label">
                    <input class="toggle-input" type="checkbox" name="isCurrent"
                           value="true" checked />
                    Current
                </label>
            </div>
        </div>

        <div class="form-actions">
            <a href="/Candidate/Search" class="btn">Cancel</a>
            <button type="submit" class="btn btn-primary">
                <svg class="icon icon-sm"><use href="#icon-save"></use></svg>
                Add Candidate
            </button>
        </div>
    </form>
</div>